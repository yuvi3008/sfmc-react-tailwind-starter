{"version":3,"file":"useInput.js","names":["useCallback","useRef","onChange","onInputChange","onKeyDown","onInputKeyDown","useInput","ref","parse","format","value","defaultValue","controlled","rest","internalRef","setRef","instance","current","_onChange","event","_onKeyDown","defaultPrevented","commonProps","isEmptyValue","text","undefined"],"sources":["../../source/react/useInput.js"],"sourcesContent":["import { useCallback, useRef } from 'react'\r\n\r\nimport {\r\n\tonChange as onInputChange,\r\n\tonKeyDown as onInputKeyDown\r\n} from '../inputControl.js'\r\n\r\nexport default function useInput({\r\n\tref,\r\n\tparse,\r\n\tformat,\r\n\tvalue,\r\n\tdefaultValue,\r\n\tcontrolled = true,\r\n\tonChange,\r\n\tonKeyDown,\r\n\t...rest\r\n}) {\r\n\t// It doesn't seem to be required to alert a developer about controlled/uncontrolled misuse:\r\n\t// if `controlled` is `true` then `defaultValue` is simply ignored.\r\n\t//\r\n\t// if (defaultValue && controlled) {\r\n\t// \tconsole.error('[input-format] You\\'ve passed both `defaultValue` and `controlled: true` properties which is an invalid use case')\r\n\t// }\r\n\r\n\tconst internalRef = useRef()\r\n\tconst setRef = useCallback((instance) => {\r\n\t\tinternalRef.current = instance\r\n\t\tif (ref) {\r\n\t\t\tif (typeof ref === 'function') {\r\n\t\t\t\tref(instance)\r\n\t\t\t} else {\r\n\t\t\t\tref.current = instance\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ref])\r\n\r\n\tconst _onChange = useCallback((event) => {\r\n\t\treturn onInputChange(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [\r\n\t\tinternalRef,\r\n\t\tparse,\r\n\t\tformat,\r\n\t\tonChange\r\n\t])\r\n\r\n\tconst _onKeyDown = useCallback((event) => {\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\t\t// If `onKeyDown()` handler above has called `event.preventDefault()`\r\n\t\t// then ignore this `keydown` event.\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn onInputKeyDown(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [\r\n\t\tinternalRef,\r\n\t\tparse,\r\n\t\tformat,\r\n\t\tonChange,\r\n\t\tonKeyDown\r\n\t])\r\n\r\n\tconst commonProps = {\r\n\t\t...rest,\r\n\t\tref: setRef,\r\n\t\tonChange: _onChange,\r\n\t\tonKeyDown: _onKeyDown\r\n\t}\r\n\r\n\tif (controlled) {\r\n\t\treturn {\r\n\t\t\t...commonProps,\r\n\t\t\tvalue: format(isEmptyValue(value) ? '' : value).text\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\t...commonProps,\r\n\t\tdefaultValue: format(isEmptyValue(defaultValue) ? '' : defaultValue).text\r\n\t}\r\n}\r\n\r\nfunction isEmptyValue(value) {\r\n\treturn value === undefined || value === null\r\n}"],"mappings":";;;;;;;;;;;;AAAA,SAASA,WAAT,EAAsBC,MAAtB,QAAoC,OAApC;AAEA,SACCC,QAAQ,IAAIC,aADb,EAECC,SAAS,IAAIC,cAFd,QAGO,oBAHP;AAKA,eAAe,SAASC,QAAT,OAUZ;EAAA,IATFC,GASE,QATFA,GASE;EAAA,IARFC,KAQE,QARFA,KAQE;EAAA,IAPFC,MAOE,QAPFA,MAOE;EAAA,IANFC,KAME,QANFA,KAME;EAAA,IALFC,YAKE,QALFA,YAKE;EAAA,2BAJFC,UAIE;EAAA,IAJFA,UAIE,gCAJW,IAIX;EAAA,IAHFV,QAGE,QAHFA,QAGE;EAAA,IAFFE,SAEE,QAFFA,SAEE;EAAA,IADCS,IACD;;EACF;EACA;EACA;EACA;EACA;EACA;EAEA,IAAMC,WAAW,GAAGb,MAAM,EAA1B;EACA,IAAMc,MAAM,GAAGf,WAAW,CAAC,UAACgB,QAAD,EAAc;IACxCF,WAAW,CAACG,OAAZ,GAAsBD,QAAtB;;IACA,IAAIT,GAAJ,EAAS;MACR,IAAI,OAAOA,GAAP,KAAe,UAAnB,EAA+B;QAC9BA,GAAG,CAACS,QAAD,CAAH;MACA,CAFD,MAEO;QACNT,GAAG,CAACU,OAAJ,GAAcD,QAAd;MACA;IACD;EACD,CATyB,EASvB,CAACT,GAAD,CATuB,CAA1B;;EAWA,IAAMW,SAAS,GAAGlB,WAAW,CAAC,UAACmB,KAAD,EAAW;IACxC,OAAOhB,aAAa,CACnBgB,KADmB,EAEnBL,WAAW,CAACG,OAFO,EAGnBT,KAHmB,EAInBC,MAJmB,EAKnBP,QALmB,CAApB;EAOA,CAR4B,EAQ1B,CACFY,WADE,EAEFN,KAFE,EAGFC,MAHE,EAIFP,QAJE,CAR0B,CAA7B;;EAeA,IAAMkB,UAAU,GAAGpB,WAAW,CAAC,UAACmB,KAAD,EAAW;IACzC,IAAIf,SAAJ,EAAe;MACdA,SAAS,CAACe,KAAD,CAAT;IACA,CAHwC,CAIzC;IACA;;;IACA,IAAIA,KAAK,CAACE,gBAAV,EAA4B;MAC3B;IACA;;IACD,OAAOhB,cAAc,CACpBc,KADoB,EAEpBL,WAAW,CAACG,OAFQ,EAGpBT,KAHoB,EAIpBC,MAJoB,EAKpBP,QALoB,CAArB;EAOA,CAhB6B,EAgB3B,CACFY,WADE,EAEFN,KAFE,EAGFC,MAHE,EAIFP,QAJE,EAKFE,SALE,CAhB2B,CAA9B;;EAwBA,IAAMkB,WAAW,mCACbT,IADa;IAEhBN,GAAG,EAAEQ,MAFW;IAGhBb,QAAQ,EAAEgB,SAHM;IAIhBd,SAAS,EAAEgB;EAJK,EAAjB;;EAOA,IAAIR,UAAJ,EAAgB;IACf,uCACIU,WADJ;MAECZ,KAAK,EAAED,MAAM,CAACc,YAAY,CAACb,KAAD,CAAZ,GAAsB,EAAtB,GAA2BA,KAA5B,CAAN,CAAyCc;IAFjD;EAIA;;EAED,uCACIF,WADJ;IAECX,YAAY,EAAEF,MAAM,CAACc,YAAY,CAACZ,YAAD,CAAZ,GAA6B,EAA7B,GAAkCA,YAAnC,CAAN,CAAuDa;EAFtE;AAIA;;AAED,SAASD,YAAT,CAAsBb,KAAtB,EAA6B;EAC5B,OAAOA,KAAK,KAAKe,SAAV,IAAuBf,KAAK,KAAK,IAAxC;AACA"}