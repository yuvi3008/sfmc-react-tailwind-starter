{"version":3,"file":"useInput.js","names":["useInput","ref","parse","format","value","defaultValue","controlled","onChange","onKeyDown","rest","internalRef","useRef","setRef","useCallback","instance","current","_onChange","event","onInputChange","_onKeyDown","defaultPrevented","onInputKeyDown","commonProps","isEmptyValue","text","undefined"],"sources":["../../source/react/useInput.js"],"sourcesContent":["import { useCallback, useRef } from 'react'\r\n\r\nimport {\r\n\tonChange as onInputChange,\r\n\tonKeyDown as onInputKeyDown\r\n} from '../inputControl.js'\r\n\r\nexport default function useInput({\r\n\tref,\r\n\tparse,\r\n\tformat,\r\n\tvalue,\r\n\tdefaultValue,\r\n\tcontrolled = true,\r\n\tonChange,\r\n\tonKeyDown,\r\n\t...rest\r\n}) {\r\n\t// It doesn't seem to be required to alert a developer about controlled/uncontrolled misuse:\r\n\t// if `controlled` is `true` then `defaultValue` is simply ignored.\r\n\t//\r\n\t// if (defaultValue && controlled) {\r\n\t// \tconsole.error('[input-format] You\\'ve passed both `defaultValue` and `controlled: true` properties which is an invalid use case')\r\n\t// }\r\n\r\n\tconst internalRef = useRef()\r\n\tconst setRef = useCallback((instance) => {\r\n\t\tinternalRef.current = instance\r\n\t\tif (ref) {\r\n\t\t\tif (typeof ref === 'function') {\r\n\t\t\t\tref(instance)\r\n\t\t\t} else {\r\n\t\t\t\tref.current = instance\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ref])\r\n\r\n\tconst _onChange = useCallback((event) => {\r\n\t\treturn onInputChange(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [\r\n\t\tinternalRef,\r\n\t\tparse,\r\n\t\tformat,\r\n\t\tonChange\r\n\t])\r\n\r\n\tconst _onKeyDown = useCallback((event) => {\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\t\t// If `onKeyDown()` handler above has called `event.preventDefault()`\r\n\t\t// then ignore this `keydown` event.\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\treturn onInputKeyDown(\r\n\t\t\tevent,\r\n\t\t\tinternalRef.current,\r\n\t\t\tparse,\r\n\t\t\tformat,\r\n\t\t\tonChange\r\n\t\t)\r\n\t}, [\r\n\t\tinternalRef,\r\n\t\tparse,\r\n\t\tformat,\r\n\t\tonChange,\r\n\t\tonKeyDown\r\n\t])\r\n\r\n\tconst commonProps = {\r\n\t\t...rest,\r\n\t\tref: setRef,\r\n\t\tonChange: _onChange,\r\n\t\tonKeyDown: _onKeyDown\r\n\t}\r\n\r\n\tif (controlled) {\r\n\t\treturn {\r\n\t\t\t...commonProps,\r\n\t\t\tvalue: format(isEmptyValue(value) ? '' : value).text\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\t...commonProps,\r\n\t\tdefaultValue: format(isEmptyValue(defaultValue) ? '' : defaultValue).text\r\n\t}\r\n}\r\n\r\nfunction isEmptyValue(value) {\r\n\treturn value === undefined || value === null\r\n}"],"mappings":";;;;;;;AAAA;;AAEA;;;;;;;;;;;;;;AAKe,SAASA,QAAT,OAUZ;EAAA,IATFC,GASE,QATFA,GASE;EAAA,IARFC,KAQE,QARFA,KAQE;EAAA,IAPFC,MAOE,QAPFA,MAOE;EAAA,IANFC,KAME,QANFA,KAME;EAAA,IALFC,YAKE,QALFA,YAKE;EAAA,2BAJFC,UAIE;EAAA,IAJFA,UAIE,gCAJW,IAIX;EAAA,IAHFC,QAGE,QAHFA,QAGE;EAAA,IAFFC,SAEE,QAFFA,SAEE;EAAA,IADCC,IACD;;EACF;EACA;EACA;EACA;EACA;EACA;EAEA,IAAMC,WAAW,GAAG,IAAAC,aAAA,GAApB;EACA,IAAMC,MAAM,GAAG,IAAAC,kBAAA,EAAY,UAACC,QAAD,EAAc;IACxCJ,WAAW,CAACK,OAAZ,GAAsBD,QAAtB;;IACA,IAAIb,GAAJ,EAAS;MACR,IAAI,OAAOA,GAAP,KAAe,UAAnB,EAA+B;QAC9BA,GAAG,CAACa,QAAD,CAAH;MACA,CAFD,MAEO;QACNb,GAAG,CAACc,OAAJ,GAAcD,QAAd;MACA;IACD;EACD,CATc,EASZ,CAACb,GAAD,CATY,CAAf;;EAWA,IAAMe,SAAS,GAAG,IAAAH,kBAAA,EAAY,UAACI,KAAD,EAAW;IACxC,OAAO,IAAAC,sBAAA,EACND,KADM,EAENP,WAAW,CAACK,OAFN,EAGNb,KAHM,EAINC,MAJM,EAKNI,QALM,CAAP;EAOA,CARiB,EAQf,CACFG,WADE,EAEFR,KAFE,EAGFC,MAHE,EAIFI,QAJE,CARe,CAAlB;;EAeA,IAAMY,UAAU,GAAG,IAAAN,kBAAA,EAAY,UAACI,KAAD,EAAW;IACzC,IAAIT,SAAJ,EAAe;MACdA,SAAS,CAACS,KAAD,CAAT;IACA,CAHwC,CAIzC;IACA;;;IACA,IAAIA,KAAK,CAACG,gBAAV,EAA4B;MAC3B;IACA;;IACD,OAAO,IAAAC,uBAAA,EACNJ,KADM,EAENP,WAAW,CAACK,OAFN,EAGNb,KAHM,EAINC,MAJM,EAKNI,QALM,CAAP;EAOA,CAhBkB,EAgBhB,CACFG,WADE,EAEFR,KAFE,EAGFC,MAHE,EAIFI,QAJE,EAKFC,SALE,CAhBgB,CAAnB;;EAwBA,IAAMc,WAAW,mCACbb,IADa;IAEhBR,GAAG,EAAEW,MAFW;IAGhBL,QAAQ,EAAES,SAHM;IAIhBR,SAAS,EAAEW;EAJK,EAAjB;;EAOA,IAAIb,UAAJ,EAAgB;IACf,uCACIgB,WADJ;MAEClB,KAAK,EAAED,MAAM,CAACoB,YAAY,CAACnB,KAAD,CAAZ,GAAsB,EAAtB,GAA2BA,KAA5B,CAAN,CAAyCoB;IAFjD;EAIA;;EAED,uCACIF,WADJ;IAECjB,YAAY,EAAEF,MAAM,CAACoB,YAAY,CAAClB,YAAD,CAAZ,GAA6B,EAA7B,GAAkCA,YAAnC,CAAN,CAAuDmB;EAFtE;AAIA;;AAED,SAASD,YAAT,CAAsBnB,KAAtB,EAA6B;EAC5B,OAAOA,KAAK,KAAKqB,SAAV,IAAuBrB,KAAK,KAAK,IAAxC;AACA"}